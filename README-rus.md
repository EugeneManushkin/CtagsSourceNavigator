# Ctags Source Navigator
Это [Far Manager](https://www.farmanager.com/) плагин для навигации по исходному коду, проиндексированному с помощью утилиты [Ctags](https://en.wikipedia.org/wiki/Ctags).
## Полезные ссылки
+ [Домашняя страница плагина](https://github.com/EugeneManushkin/CtagsSourceNavigator)
+ [Far PlugRing](https://plugring.farmanager.com/plugin.php?pid=478)
+ [Обсуждение плагина](https://forum.farmanager.com/viewtopic.php?f=5&t=6394)
## Фичи
+ Переход к объявлению имени
+ Автодополнение (code completion)
+ Поиск имени по всему репозиторию
+ Поиск имени в текущем файле
+ Поиск и открытие файла по имени
+ Список членов класса
+ История навигации по исходникам
+ Создание базы данных Ctags для выбранного корня репозитория
+ Переиндексация репозитория
## Что нового
### 2.1.0.31
+ Поддержано индексирование текущего открытого файла
+ Меню конфигурации плагина доступно из главного меню и меню editor
### 2.1.0.29
+ Поддержан поиск нечувсвтительный к регистру. Убраная галочка "Case Sensitive filter" в меню конфигурации плагина теперь означает нечувствительность к регистру во всех видах поиска, включая поиск по всему репозиторию
+ Члены класса теперь отображаются в том порядка, в котором объявлены. Чтобы сортировать члены классов по имени включите опцию "Sort class members by name" в меню конфигурации плагина
+ Теперь можно использовать регулярные выражения в фильтре для "Search name in opened file" и "Class members"
+ Улучшена опция "Open declaration"
+ Пофикшены некоторые баги
### 2.1.0.21
+ Поиск файла по имени (то же что делает команда "Open resource" в Eclipse CDT)
+ Поддержаны tags файлы с абсолютными путями (ctags.exe ... -R C:\full\path\to\repository)
+ Улучшен интерфейс
+ Пофикшены некоторые баги
## Требования
+ Far3
+ Утилита Ctags
## Установка
1. Загрузите последний релиз
2. Извлеките содержимое архива в папку FarManager/Plugins/ctags
3. Установите утилиту ctags. Вы можете установить [Universal Ctags](https://ctags.io/), [Exuberant Ctags](http://ctags.sourceforge.net/), либо использовать ctags из [Cygwin](http://www.cygwin.com/).
4. *[Пропустите этот шаг, если вы не хотите индексировать репозиторий плагином или если утилита ctags доступна из командной строки (прописана в %PATH%).]*
   Перейдите на страницу **F9->Options->Plugins configuration->Ctags Source Navigator**, поместите полный путь к ctags.exe в поле 'Path to ctags.exe', нажмите ОК.
5. *[Пропустите этот шаг, если вы не хотите использовать стандартный макрос с горчячими клавишами.]* Скопируйте скрипт ctags_hotkeys.lua в папку %FARPROFILE%\Macros\scripts. Это можно сделать в командной строке Far Manager: перейдите в папку с распакованным плагином и выполните
   ```
   copy ctags_hotkeys.lua "%FARPROFILE%\Macros\scripts"
   ```
   После копирования скрипта перезапустите Far Manager
## Использование
1. Сначала вам необходимо проиндексировать репозиторий. Для этого вы можете использовать ctags плагин: перейдите в папку репозитория, переместите курсор на папку, которую вы хотите индексировать, или на папку ```'..'```, если вы хотите индексировать весь репозиторий. Нажмите **F11->Ctags Source Navigator->Tag selected directory**. Файл тегов будет создан внутри выбранной папки, и все символы будут автоматически загружены в плагин.
2. Если у вас уже есть репозиторий, индексированный утилитой ctags, вы можете загрузить индексный файл (tags), чтобы сообщить плагину, что вы намерены работать с этим репозиторием. Это можно сделать несколькими способами:
    * *Ничего не делать*: при попытке поиска имени плагин сам предложит загрузить один из файлов тегов, который он нашел в родительских каталогах.
    * Переместите курсор на файл тегов и просто нажмите Enter.
    * Переместите курсор на файл тегов, нажмите **F11->Ctags Source Navigator->Load tags file** (самый скучный способ загрузки тегов).
    * Загрузите недавно открытый файл тегов. Нажмите **F11->Ctags Source Navigator->Load from history** и выберите файл тэгов.

    Теперь плагин «знает» о символах в вашем репозитории, и вы можете использовать плагин для поиска имен.
3. Откройте файл с исходным кодом, перейдите к имени, объявление которого вы хотели бы найти. Нажмите **F11->Ctags Source Navigator->Open declaration**, и плагин автоматически переместит курсор к объявлению этого имени. Если имя имеет несколько объявлений (например, в C++ определение имени также является объявлением, поэтому в этом случае у вас будет два объявления), плагин предложит загрузить одно из них.
4. Для автодополнения имени нажмите **F11->Ctags Source Navigator->Complete symbol**
5. Вы можете вернуться на то место откуда перешли используя планин нажав **F11->Ctags Source Navigator->Go back**
6. Вы можете просмотреть список членов класса. Для этого установите курсор на имя класса, а затем нажмите **F11->Ctags Source Navigator->Class members**
7. Вы можете просмотреть имена, объявленные в текущем файле. Нажмите **F11->Ctags Source Navigator->Search name in opened file** и начните печатать (или вставьте из буфера обмена) имя, которое вы хотите найти.
8. Вы можете искать имена по всему репозиторию. Эта опция работает как в главном меню плагина так и в меню редактора. Нажмите **F11->Ctags Source Navigator->Search name in entire repository** и начните печатать (или вставьте из буфера обмена) имя, которое вы хотите найти.
9. Вы можете искать и открывать файлы, которые были проиндексированы. Эта опция доступна в главном меню и в меню редактора, нажмите **F11->Ctags Source Navigator->Search file by name** и начните печатать (или вставьте из буфера обмена) имя файла, который хотите открыть.
10. Если кодовая база устарела, вы можете переиндексировать репозиторий. Нажмите **F11->Ctags Source Navigator->Reindex repository** в главном меню или в меню editor и плагин предложит вам переиндексировать один из tags файлов, которые он нашел. **Если во время индексирования что-то пойдет не так (например, вы отмените операцию) плагин откатится к старому tags файлу.**
## Горячие клавиши (доступно только если установлено)
### Редактор:
+ Open declaration - ```Ctrl+F```
+ Complete name - ```Ctrl+Space```
+ Go back - ```Ctrl+G```
+ Search name in opened file - ```Ctrl+Shift+X```
+ Search name in entire repository - ```Ctrl+Shift+T```
+ Search file by name - ```Ctrl+Shift+R```
### Главное меню:
+ Search name in entire repository - ```Ctrl+Shift+T```
+ Search file by name - ```Ctrl+Shift+R```
## Сделайте вклад в проект
Если у вас есть крутая идея новой фичи или вы обнаружили ошибку, пожалуйста, создайте [ишью](https://github.com/EugeneManushkin/CtagsSourceNavigator/issues/new). Нажмите на звездочку в правом верхнем углу страницы, если вам нравится этот плагин
## Исходный код
Код этого плагина основан на исходном коде оригинального [Ctags Source Navigator](https://github.com/trexinc/evil-programmers/tree/master/ctags) плагина. Изначально я планировалось просто портировать его под третий Far. Однако чтобы плагин можно было использовать пришлось все серьезно переделать и добавить фичей (и фичей будет еще больше!). Поэтому я решил стать мантейнером плагина. Спасибо Константину Ступнику, автору оригинального плагина Ctags Source Navigator.