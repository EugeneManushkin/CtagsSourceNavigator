# Ctags Source Navigator
Это [Far Manager](https://www.farmanager.com/) плагин для навигации по исходному коду, проиндексированному с помощью утилиты [Ctags](https://en.wikipedia.org/wiki/Ctags).
## Полезные ссылки
+ [Домашняя страница плагина](https://github.com/EugeneManushkin/CtagsSourceNavigator)
+ [Far PlugRing](https://plugring.farmanager.com/plugin.php?pid=478)
+ [Обсуждение плагина](https://forum.farmanager.com/viewtopic.php?f=5&t=6394)
## Фичи
+ Переход к объявлению имени
+ Автодополнение (code completion)
+ Поиск имени по всему репозиторию
+ Поиск имени в текущем файле
+ Поиск и открытие файла по имени
+ Список членов класса
+ История навигации по исходникам
+ Создание базы данных Ctags для выбранного корня репозитория
+ Переиндексация репозитория
+ Макрос с горячими клавишами
## Что нового
### 2.1.0.41
+ Учтановка Ctags больше не требуется! Последняя версия [Universal Ctags](https://ctags.io/) добавлена в архив с плагином (#42)
+ Часто открываемые имена и файлов показываются в search меню. Список часто открываемых имен и файлов хранится для каждого репозитория и синхронизируется между несколькими запущенными Far Manager (#33)
+ Добавлена возможность переходить к инклуд файлам указанным в ковычках или угловых скобках ```#include <src/include/my_file.h>``` или ```#include "src\my_file.h"``` (#41)
+ Добавлена возможность искать файлы с указанием частичного пути к файлу. Можно так же указывать номер строки через двоеточие ```src/include/my_file.h:1234```
+ Пофикшены некоторые баги
### 2.1.0.36
+ Поддержан предпросмотр тегов по F4 без сброса результатов поиска (#27)
+ Улучшена навигация: теперь можно перейти не только назад, но и вперед (команда 'Go forward' либо Ctrl+D). Обновите макрос с горячими клавишами
+ Плагин собран при помощи сервиса Appveyor
+ Пофикшены некоторые баги
### 2.1.0.31
+ Поддержано индексирование текущего открытого файла
+ Меню конфигурации плагина доступно из главного меню и меню editor
## Установка
1. Загрузите последний релиз со [страницы релизов](https://github.com/EugeneManushkin/CtagsSourceNavigator/releases)
2. Извлеките содержимое архива в папку FarManager/Plugins/ctags
3. Установите макрос с горячими клавишами. Скопируйте скрипт ctags_hotkeys.lua в папку %FARPROFILE%\Macros\scripts
   ```
   copy ctags_hotkeys.lua "%FARPROFILE%\Macros\scripts"
   ```
   После копирования скрипта перезапустите Far Manager
## Использование
1. Используйте плагин в непроиндексированных файлах. Плагин автоматически проиндексирует текущий открытый файл при вызове меню плагина
2. Проиндексируйте репозиторий. Для этого вы можете использовать ctags плагин: перейдите в папку репозитория, переместите курсор на папку, которую вы хотите индексировать,
   или на папку ```'..'```, если вы хотите индексировать весь репозиторий. Нажмите **F11->Ctags Source Navigator->Index selected directory**. Файл тегов будет создан внутри
   выбранной папки, и все символы будут автоматически загружены в плагин. Если у вас уже есть репозиторий, индексированный утилитой ctags, вы можете загрузить индексный файл (tags),
   чтобы сообщить плагину, что вы намерены работать с этим репозиторием. Это можно сделать несколькими способами:
    * *Ничего не делать*: при попытке поиска имени плагин сам предложит загрузить один из файлов тегов, который он нашел в родительских каталогах.
    * Переместите курсор на файл тегов и просто нажмите Enter.
    * Переместите курсор на файл тегов, нажмите **F11->Ctags Source Navigator->Load tags file** (самый скучный способ загрузки тегов).
    * Загрузите недавно открытый файл тегов. Нажмите **F11->Ctags Source Navigator->Load from history** и выберите файл тэгов.

    Теперь плагин «знает» о символах в вашем репозитории, и вы можете использовать плагин для поиска имен.
3. Откройте файл с исходным кодом, перейдите к имени, объявление которого вы хотели бы найти. Нажмите **F11->Ctags Source Navigator->Go to**, и плагин автоматически переместит курсор к
   объявлению этого имени. Если имя имеет несколько объявлений (например, в C++ определение имени также является объявлением, поэтому в этом случае у вас будет два объявления), плагин
   предложит загрузить одно из них.
4. Для автодополнения имени нажмите **F11->Ctags Source Navigator->Complete symbol**
5. Вы можете вернуться на то место откуда перешли используя планин нажав **F11->Ctags Source Navigator->Go back**
6. Перемещайтесь между текущей и предыдущей позиции используя опцию **Go back** вместе с **F11->Ctags Source Navigator->Go forward**
7. Вы можете просмотреть список членов класса. Для этого установите курсор на имя класса, а затем нажмите **F11->Ctags Source Navigator->Class members**
8. Вы можете просмотреть имена, объявленные в текущем файле. Нажмите **F11->Ctags Source Navigator->Search name in opened file** и начните печатать (или вставьте из буфера обмена) имя, которое вы хотите найти.
9. Вы можете искать имена по всему репозиторию. Эта опция работает как в главном меню плагина так и в меню редактора. Нажмите **F11->Ctags Source Navigator->Search name in entire repository** и начните печатать (или вставьте из буфера обмена) имя, которое вы хотите найти.
10. Вы можете искать и открывать файлы, которые были проиндексированы. Эта опция доступна в главном меню и в меню редактора, нажмите **F11->Ctags Source Navigator->Search file by name** и начните печатать (или вставьте из буфера обмена) имя файла, который хотите открыть.
11. Если кодовая база устарела, вы можете переиндексировать репозиторий. Нажмите **F11->Ctags Source Navigator->Reindex repository** в главном меню или в меню editor и плагин предложит вам переиндексировать один из tags файлов, которые он нашел. **Если во время индексирования что-то пойдет не так (например, вы отмените операцию) плагин откатится к старому tags файлу.**
## Горячие клавиши (доступно только если установлено)
### Редактор:
+ Go to - ```Ctrl+F```
+ Complete name - ```Ctrl+Space```
+ Go back - ```Ctrl+G```
+ Go forward - ```Ctrl+D```
+ Search name in opened file - ```Ctrl+Shift+X```
+ Search name in entire repository - ```Ctrl+Shift+T```
+ Search file by name - ```Ctrl+Shift+R```
### Главное меню:
+ Search name in entire repository - ```Ctrl+Shift+T```
+ Search file by name - ```Ctrl+Shift+R```
## Сделайте вклад в проект
Если у вас есть крутая идея новой фичи или вы обнаружили ошибку, пожалуйста, создайте [ишью](https://github.com/EugeneManushkin/CtagsSourceNavigator/issues/new). Нажмите на звездочку в правом верхнем углу страницы, если вам нравится этот плагин
## Исходный код
Код этого плагина основан на исходном коде оригинального [Ctags Source Navigator](https://github.com/trexinc/evil-programmers/tree/master/ctags) плагина. Изначально я планировал просто портировать его под третий Far. Однако чтобы плагин можно было использовать пришлось все серьезно переделать и добавить фичей (и фичей будет еще больше!). Поэтому я решил стать мантейнером плагина. Спасибо Константину Ступнику, автору оригинального плагина Ctags Source Navigator.